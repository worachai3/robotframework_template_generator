*** Settings ***
Suite Setup    DB_CONNECT
Suite Teardown    DB_CLOSE
Resource    ${CURDIR}/../../../keywords/common/http_status_code.robot
Resource    ${CURDIR}/../../../keywords/database/transaction.robot
Resource    ${CURDIR}/../../../keywords/database/storedValueAccount.robot
Resource    ${CURDIR}/../../../keywords/database/kym_profile.robot
Resource    ${CURDIR}/../../../keywords/database/pml_transaction.robot
Resource    ${CURDIR}/../../../keywords/api/create_transaction.robot
Resource    ${CURDIR}/../../../keywords/api/merchant-services/post_manual_sweep.robot
Resource    ${CURDIR}/../../../keywords/api/merchant-bff/authorization.robot
Resource    ${CURDIR}/../../../keywords/api/merchant-bff/post_v2_manualSweep_sweep.robot
Resource    ${CURDIR}/../../../keywords/api/mms_eco/post_external_merchant_transaction-detail.robot
Resource    ${CURDIR}/../../../keywords/api/mms_eco/post_merchant_pml_create.robot
Resource    ${CURDIR}/../../../keywords/database/pml_profile.robot
Resource    ${CURDIR}/../../../keywords/database/partnermetadata.robot
Resource    ${CURDIR}/../../../keywords/database/partnerorder.robot
Resource    ${CURDIR}/../../../keywords/api/mms_eco/post_create_qr.robot

Variables    ${CURDIR}../../../../resources/testdata/${env}/mms_eco/merchant_profile_from_mms_eco.yaml
Variables    ${CURDIR}../../../../resources/configs/${env}/env_config.yaml
Variables   ${CURDIR}/../../../resources/testdata/merchant_service/${env}/merchant_service_profile.yaml
Variables   ${CURDIR}/../../../resources/testdata/merchant_service/${env}/merchant_profile.yaml
Variables   ${CURDIR}/../../../resources/testdata/post_create_qr/create_qr.yaml
Variables   ${CURDIR}/../../../resources/testdata/${env}/mms_eco/post_create_qr.yaml
Variables   ${CURDIR}/../../../resources/expected_result/${env}/mms_eco/post_create_qr_result.yaml

*** Test Cases ***
MATC-7871
    [Documentation]    To verify that the lookup transaction api return successful with condition below - Have lookup 
    ...    transaction exist on transaction table and within period of cut of time before send request - And request with lookup 
    ...    amount included with total approved amount on transaction table Less Than or not reach kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    ...       Regression    Smoke    tag1    tag2    tag3    tag4    tag5    tag6    tag7    tag 8    tag 9    tagtagtagtag
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount1}    Set Variable    0.01
    ${lookup_amount2}    Set Variable    99999.99
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ################### Intraday Transaction #########################
    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${lookup_amount1}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number2}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number2}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number2}      ${lookup_amount2}    ${storedid_lookup_success}    ${buyer_name_lookup_success}

MATC-7872
    [Documentation]    To verify that the lookup transaction api return successful with condition below - Have approved 
    ...    transaction (txn01) within period cut of time and Have approved trans out of cut of time, and lookup transaction exist 
    ...    on transaction table before send request - And request with lookup amount included with total approved amount 
    ...    on transaction table Less Than or not reach kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${approved_amt_yesterday_date}    Set Variable    0.50
    ${approved_amt_current_date}    Set Variable    10.00
    ${lookup_amount}    Set Variable    99989.49
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}

    ################### Intraday Transaction #########################
    Prepare Yesterday Transaction And Specific Time    ${wallet_id_lookup_success}    ${approved_amt_yesterday_date}    23:00:00
    Prepare Yesterday Transaction And Specific Time    ${wallet_id_lookup_success}    ${approved_amt_yesterday_date}    22:59:59
    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${lookup_amount}
    ${http_status_code}    ${retrieval_ref_number}    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amt_current_date}

    ### Try to update settlement status to settled for prove about not use this column in logic of api lookup ###
    Update Settlement Status And Timestamp By Retrival Ref Number    ${wallet_id_lookup_success}    ${time_stamp}    ${retrieval_ref_number}    STM02
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}

MATC-7873
    [Documentation]    To verify that the lookup transaction api return successful in case request with conditon below 
    ...    - Not have data within period cut of time on transaction table and Request with lookup amount included with 
    ...    total approved amount on transaction table Equal kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    100000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}

MATC-7874
    [Documentation]    To verify that the lookup transaction api return successful in case request with conditon below 
    ...    - Have approved transaction exist on transaction table before send request - And request with lookup amount 
    ...    included with total approved amount on transaction table equal kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${approved_amount}    Set Variable    9999.50
    ${lookup_amount}    Set Variable    90000.50
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ################### Intraday Transaction #########################
    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amount}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}

MATC-7875
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with conditon 
    ...    below - Have lookup transaction exist on transaction table before send request - And request lookup amount 
    ...    included with total approved amount on transaction table greater than kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    100000.01
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ################### Intraday Transaction #########################
    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${lookup_amount}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object    ${response}    0065    Transaction amount is reached the daily limit.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7876
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with conditon 
    ...    below - Have approved transaction (txn01) exist on transaction table before send request - And request lookup 
    ...    amount included with total approved amount on transaction table greater than kym daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    90000.01
    ${approved_amount}    Set Variable    10000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ################### Intraday Transaction #########################
    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amount}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object    ${response}    0065    Transaction amount is reached the daily limit.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7877
    [Documentation]    To verify that the lookup transaction api returned unsuccessful in case not found kym profile 
    ...    daily limit 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    ${lookup_amount}    Set Variable    1.50
    ${wallet_id_not_found}    Set Variable    014100000000000
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_not_found}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object    ${response}    0096    Cannot find KYM profile or daily limit.    Unknown    ${retrieval_ref_number}    ${wallet_id_not_found}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7878
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request lookup with wallet 
    ...    status is suspend(WS02) 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ...    AND    Update Wallet Status To Suspended By WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    1.50
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Wallet Status Is Not Active    ${response}
    Assert Response Body With Data Object    ${response}    E0000007    Destination account number inactive    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Update Wallet Status To Active By WalletID    ${wallet_id_lookup_success}

MATC-7879
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request lookup with wallet 
    ...    status is closed(WS03) 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ...    AND    Update Wallet Status To Closed By WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    1.50
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Wallet Status Is Not Active    ${response}
    Assert Response Body With Data Object    ${response}    E0000007    Destination account number inactive    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Update Wallet Status To Active By WalletID    ${wallet_id_lookup_success}

MATC-7881
    [Documentation]    To verify that the lookup transaction api return unsuccesful in case request with lookup amount 
    ...    greater than maximum limit (> 500,000) per request 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success_t03}
    ...    AND    Update Tier To Tier3 By ShopID    ${shopid_lookup_success_t03}
    ${lookup_amount}    Set Variable    100000.01
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success_t03}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Amount Limit Is Exceeded    ${response}
    Assert Response Body With Data Object    ${response}    0034    Amount limit is exceeded.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success_t03}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7882
    [Documentation]    To verify that the lookup transaction api return unsuccesful in case request lookup with amount 
    ...    less than 0 bath per request 
    [Tags]    QR & Payment    Api Lookup Transaction    Low    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    -10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Request With Negative Amount    ${response}
    Assert Response Body With Data Object In Case Not Return Description    ${response}    0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7883
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqUID as 
    ...    required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqUID=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_rquid=${NULL}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7884
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqDt as 
    ...    required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${rqDt}    Set Variable   ${NULL}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7885
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqAppId as 
    ...    required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqAppId=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7886
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with toProxyType 
    ...    as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyType=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_proxy_type=${NULL}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7887
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with toProxyValue 
    ...    as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyValue=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_proxy_value=${NULL}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7888
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with terminalNo as 
    ...    required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalNo=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_terminal_no=${NULL}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7890
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with transAmount 
    ...    as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    ${NULL}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7891
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with feeAmount as 
    ...    required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    feeAmount=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7892
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with transferFee 
    ...    as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transfererFee=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7893
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    fromSenderBank as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    fromSenderBank=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7894
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    transferWithTax as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transferWithTax=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7895
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with promptPayFlag 
    ...    as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    promptPayFlag=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7896
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    billReference1 as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${wallet_id_lookup_success}    Set Variable    ${NULL}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object    ${response}    0096    Cannot find KYM profile or daily limit.    Unknown    ${retrieval_ref_number}    wallet_id=${NULL}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7897
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqUID as 
    ...    required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqUID=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_rquid=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7898
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqDt as 
    ...    required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${rqDt}    Set Variable   ${EMPTY}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7899
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with rqAppId as 
    ...    required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqAppId=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7900
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with toProxyType 
    ...    as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyType=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_proxy_type=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7901
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with toProxyValue 
    ...    as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyValue=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_proxy_value=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7902
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with terminalNo as 
    ...    required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalNo=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_terminal_no=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7903
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    retrivalReferenceNumber as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${EMPTY}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7904
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with transAmount 
    ...    as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    ${EMPTY}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7905
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with feeAmount as 
    ...    required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    feeAmount=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7906
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with transferFee 
    ...    as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transfererFee=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7907
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    fromSenderBank as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    fromSenderBank=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7908
    [Documentation]    To Verify that the lookup transaction api return unsuccessful in case request with 
    ...    transferWithTax as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transferWithTax=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7909
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with promptPayFlag 
    ...    as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    promptPayFlag=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7910
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    billReference1 as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${wallet_id_lookup_success}    Set Variable    ${EMPTY}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object    ${response}    0096    Cannot find KYM profile or daily limit.    Unknown    ${retrieval_ref_number}    wallet_id=${EMPTY}    account_name=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7911
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send rqUID as required 
    ...    field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqUID=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7912
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send rqDt as required 
    ...    field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    rqDt=*REMOVE*    tranAmount=${lookup_amount}
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7913
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send rqAppId as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    rqAppId=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7914
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send toProxyType as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyType=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7915
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send toProxyValue as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    toProxyValue=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    #Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7916
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send terminalNo as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalNo=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    #Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7917
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send 
    ...    retrivalReferenceNumber as required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${headers}    Create Header Request For Create Lookup Transaction
    ${params}    Create Request Body For Lookup API    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    ...    rqUID=SCB_20080215_QASCB001    feeAmount=1.11    retrievalReferenceNumber=NULL    funcNm=lookup
    ...    rqAppId=014    toProxyType=BILLERID    toProxyValue=ashd    terminalNo=99999
    ...    terminalType=0060    transfererFee=0.00    fromSenderBank=014    transferWithTax=0
    ...    settlementDate=1997-07-16T19:20:30.451+07:00    promptPayFlag=00    billReference2=SCB    billReference3=0000000000000001
    ...    fromProxyValue=${EMPTY}    fromProxyType=${EMPTY}    typeofSender=${EMPTY}    senderTaxID=${EMPTY}
    ...    rtpReference=280618171556    senderName=อรรถพล ภาวศุทธิกุล
    ${http_status_code}    ${response}    Send Post Request    ${headers}    ${mms_post_lookup_uri}    PostLookup    ${mms_host_url}    request_body=${params}
    #################################################################
    Remove From Dictionary    ${params}    retrievalReferenceNumber
    #${retrieval_ref_number}    Get From Dictionary    ${params}    retrievalReferenceNumber
    ${http_status_code}    ${response}    Send Post Request    ${headers}    ${mms_post_lookup_uri}    PostLookup    ${mms_host_url}    request_body=${params}
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    #Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}

MATC-7918
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send transAmount as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    tranAmount=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7919
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send feeAmount as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    feeAmount=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7920
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send transferFee as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transfererFee=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7921
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send fromSenderBank as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    fromSenderBank=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7922
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send promptPayFlag as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    promptPayFlag=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7923
    [Documentation]    To Verify that the lookup transaction api return unsuccessful in case NOT send transferWithTax 
    ...    as required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    transferWithTax=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7924
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send billReference1 as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    billReference1=*REMOVE*    rqDt=${rqDt}    tranAmount=${lookup_amount}
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    #Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0096
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['settlementDate']}    1997-07-16T19:20:30.451+07:00
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['errorDescription']}    Cannot find KYM profile or daily limit.
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-7925
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case send all parameters has 
    ...    value are NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Low    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${headers}    Create Header Request For Create Lookup Transaction
    ${params}    Create Request Body For Lookup API
    ...    billReference1=${NULL}
    ...    rqDt=${NULL}
    ...    amount=${NULL}
    ...    rqUID=${NULL}
    ...    feeAmount=${NULL}
    ...    retrievalReferenceNumber=${NULL}
    ...    funcNm=${NULL}
    ...    rqAppId=${NULL}
    ...    toProxyType=${NULL}
    ...    toProxyValue=${NULL}
    ...    terminalNo=${NULL}
    ...    terminalType=${NULL}
    ...    transfererFee=${NULL}
    ...    fromSenderBank=${NULL}
    ...    transferWithTax=${NULL}
    ...    settlementDate=${NULL}
    ...    promptPayFlag=${NULL}
    ...    billReference2=${NULL}
    ...    billReference3=${NULL}
    ...    fromProxyValue=${NULL}
    ...    fromProxyType=${NULL}
    ...    typeofSender=${NULL}
    ...    senderTaxID=${NULL}
    ...    rtpReference=${NULL}
    ...    senderName=${NULL}
    #################################################################
    ${http_status_code}    ${response}    Send Post Request    ${headers}    ${mms_post_lookup_uri}    PostLookup    ${mms_host_url}    request_body=${params}
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Data Object In Case Send All Fields Are Null     ${response}    Cannot find KYM profile or daily limit.

MATC-7928
    [Documentation]    To ensure that the lookup transaction api return successful in case ShopNameThai of 
    ...    billReference1 in request body has character grather than 50 character 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update ShopNameTH On Shop Table    ${shopth_wallet_lookup_50_char}    ${shopid_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_50_char})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update ShopNameTH On Shop Table    ${shopth_wallet_lookup_success}    ${shopid_lookup_success}

MATC-7929
    [Documentation]    To ensure that the lookup transaction api return unsuccessful in case request with 
    ...    retrievalReferenceNumber and fromSenderBank that exist on the transaction table 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}     retrievalReferenceNumber=${retrieval_ref_number}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response}
    Assert Response Body With Data Object    ${response}    0034    Invalid reference data    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}

MATC-7930
    [Documentation]    To ensure that the lookup transaction api return successful in case request with 
    ...    retrievalReferenceNumber that exist but fromSenderBank is not exist on the transaction table 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    fromSenderBank=004
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}     retrievalReferenceNumber=${retrieval_ref_number}
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=004

MATC-8111
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    settlementDate as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    settlementDate=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_settle_date=${NULL}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-8113
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case NOT send settlementDate as 
    ...    required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    settlementDate=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-8114
    [Documentation]    To verify that the lookup transaction api return unsuccessful in case request with 
    ...    settlementDate as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    settlementDate=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_settle_date=${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-8423
    [Documentation]    To verify that the lookup transaction api return successful and return response 
    ...    billerAccountName is "SCB MANEE SHOP (Wallet_id)" if payer with bank code or fromSenderBank not in config 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update Tier To Tier1 By ShopID    ${shopid_lookup_success}
    ${uob_bank_code}    Set Variable    024
    ${lookup_amount}    Set Variable    100000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    fromSenderBank=${uob_bank_code}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=${uob_bank_code}

### This case for use with manual test and before run must change cut offtime
#MATC-7927
#    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
#    ${approved_amt_yesterday_date}    Set Variable    50.00
#    ${approved_amt_current_date1}    Set Variable    90.00
#    ${approved_amt_current_date2}    Set Variable    80.00
#    ${approved_amt_current_date3}    Set Variable    20.00
#
#    ${lookup_amount}    Set Variable    99900.00
#
#    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
#    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
#
#    ${datetime}    Set Time To date_time.Current Date    18:30:00
#    ${rqdt_lookup}    Change Time Format for Approved API    ${datetime}
#    ################### Intraday Transaction #########################
#    Prepare Yesterday Transaction And Specific Time    ${wallet_id_lookup_success}    ${approved_amt_yesterday_date}    19:30:00
#    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt}    10.00
#
#    ${http_status_code}    ${retrieval_ref_number1}    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amt_current_date1}
#    Update RqDt To After Cut Of Time Intraday    ${current_date}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}    17:59:00
#    ${http_status_code}    ${retrieval_ref_number2}    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amt_current_date2}
#    Update RqDt To After Cut Of Time Intraday    ${current_date}    ${wallet_id_lookup_success}    ${retrieval_ref_number2}    18:00:00
#    ${http_status_code}    ${retrieval_ref_number3}    Create Approved Payment Transaction    ${wallet_id_lookup_success}    ${rqdt}    ${approved_amt_current_date3}
#    Update RqDt To After Cut Of Time Intraday    ${current_date}    ${wallet_id_lookup_success}    ${retrieval_ref_number3}    18:00:01
#    #####################################################################
#    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqdt_lookup}    ${lookup_amount}
#    Assert Http Status Code Is 400 Bad Request    ${http_status_code}

MATC-12161
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case NOT 
    ...    send funcNm as required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    funcNm=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12162
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case 
    ...    request with funcNm as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    funcNm=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12163
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case 
    ...    request with funcNm as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    funcNm=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12164
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case NOT 
    ...    send terminalType as required field in request body 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    #################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalType=*REMOVE*
    #################################################################
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Should Be Equal As Strings    ${response['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response['rsDt']}
    Should Be Equal As Strings    ${response['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response['responseCode']}    0034
    Should Be Equal As Strings    ${response['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response['terminalNo']}    99999
    Should Be Equal As Strings    ${response['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response['billReference1']}    ${wallet_id_lookup_success}
    Should Be Equal As Strings    ${response['billReference2']}    SCB
    Should Be Equal As Strings    ${response['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response['accountName']}    ${EMPTY}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12165
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case 
    ...    request with terminalType as required field is EMPTY 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalType=${EMPTY}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12166
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case 
    ...    request with terminalType as required field is NULL 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    terminalType=${NULL}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Missing Required Fields    ${response}
    Assert Response Body With Data Object In Case Missing Required Fields    ${response}     0034    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}

MATC-12168
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with billReference2 has prefix PN and length = 10 that exist on transaction table but TransactionStatus = 
    ...    TXN05 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    100.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wp_wallet_id}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount}
    ${order_id}    Set Variable    ${response['data']['orderId']}
    #####################################################################
    ${http_status_code_0}    ${response_0}    ${retrieval_ref_number_0}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    billReference2=${order_id}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    billReference2=${order_id}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${order_id}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    description=${order_id}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_success}

MATC-12169
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with billReference2 has prefix PL and length = 10 that exist on transaction table but TransactionStatus = 
    ...    TXN05 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${lookup_amount}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount}
    #####################################################################
    ${http_status_code_0}    ${response_0}    ${retrieval_ref_number_0}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount}    billReference2=${order_id}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount}    billReference2=${order_id}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_pml})    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_pml}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_pml}    ${buyer_name_lookup_success}    description=${order_id}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12170
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with billReference2 has prefix PN but length != 10 that exist on transaction table and TransactionStatus = 
    ...    TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    99.99
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wallet_id_lookup_success}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount2}
    ${order_id_0}    Set Variable    ${response['data']['orderId']}
    ${order_id}    Set Variable    PNAAA0000
    Update Partner Order By WalletId    ${wallet_id_lookup_success}    ${order_id}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${order_id}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount2}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    description=PNAAA0000
    [Teardown]    Delete Partner Order By WalletId    ${wallet_id_lookup_success}

MATC-12171
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with billReference2 has prefix PL but length != 10 that exist on transaction table and TransactionStatus = 
    ...    TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${lookup_amount2}    Set Variable    99.99
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount2}
    ${order_id}    Set Variable    PLAAA0000
    Update OrderID In PML Transaction By ShopID    ${order_id}    ${shopid_lookup_pml}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_pml})    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_pml}    ${retrieval_ref_number}      ${lookup_amount2}    ${storedid_lookup_pml}    ${buyer_name_lookup_success}    description=${order_id}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12172
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PN and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wp_wallet_id}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount2}
    ${order_id}    Set Variable    ${response['data']['orderId']}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${order_id}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Partner Order By WalletId    ${wallet_id_lookup_success}

MATC-12173
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PL and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${lookup_amount2}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount2}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_pml}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12174
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix pn and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Partner Order By WalletId    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wallet_id_lookup_success}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount2}
    ${query_result}    Get Partner Order By WalletID    ${wallet_id_lookup_success}
    ${id}    Set Variable    ${query_result[0]['Id']}
    ${order_id}    Set Variable    pnaaa00001

    Update Partner Order By WalletId    ${wallet_id_lookup_success}    ${order_id}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${order_id}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Partner Order By WalletId    ${wallet_id_lookup_success}

MATC-12175
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix pl and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN01 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${lookup_amount2}    Set Variable    99.99
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount2}
    ${order_id}    Set Variable    plaaa00001
    Update OrderID In PML Transaction By ShopID    ${order_id}    ${shopid_lookup_pml}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    ${order_id}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_pml}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12176
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PN and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN07 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wp_wallet_id}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount2}
    ${order_id}    Set Variable    ${response['data']['orderId']}
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    ${order_id}
    Update TransactionStatus by RetrievalReferenceNumber    ${retrieval_ref_number2}    TXN07
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request   ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${order_id}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_success}

MATC-12177
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PN and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN08 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    61.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th
    ...    test021       SHIPNITY      wallet_id=${wp_wallet_id}       payment_type=${create_qr_payment_type_wechat}       amount=${lookup_amount2}
    ${order_id}    Set Variable    ${response['data']['orderId']}
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    ${orderId}
    Update TransactionStatus by RetrievalReferenceNumber    ${retrieval_ref_number2}    TXN08
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount2}    billReference2=${orderId}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_success}    description=${orderId}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_success}

MATC-12178
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PL and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN07 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${lookup_amount2}    Set Variable    61.00
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount2}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    ${order_id}
    Update TransactionStatus by RetrievalReferenceNumber    ${retrieval_ref_number2}    TXN07
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12179
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [duplicate bill] in case 
    ...    request lookup with billReference2 has prefix PL and length = 10 that exist on transaction table and 
    ...    TransactionStatus = TXN08 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount2}    Set Variable    1500.00
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=${lookup_amount2}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    ################### Approve Transaction #########################
    ${retrieval_ref_number2}    Prepare Approve Transaction For Lookup    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    ${order_id}
    Update TransactionStatus by RetrievalReferenceNumber    ${retrieval_ref_number2}    TXN08
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case duplicate bill    ${response}
    Assert Response Body With Data Object    ${response}    0065    Suspected duplicate bill lookup request.    Unknown    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_success}

MATC-12180
    [Documentation]    To verify that the lookup transaction api return unsuccessful HTTP200 [Success] in case request 
    ...    lookup with billReference2 that already paid with PML_CCFA 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_pml}
    ${order_id}    Create PML For External Transaction Detail    ${wallet_id_lookup_pml}    PML_CCFA    amount=1500.00
    Paid CCFA For External Transaction Detail    ${order_id}
    ${lookup_amount2}    Set Variable    1500.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${time_stamp}    Convert Date With Time Zone And Exclude Sec    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_pml}    ${rqDt}    ${lookup_amount2}    billReference2=${order_id}    billReference3=0000000000002302
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_pml})    ${retrieval_ref_number}    ${wallet_id_lookup_pml}    description=${order_id}    ref3=0000000000002302    account_name=ฟาสห้าร้อยห้าสิบเจ็ด ฟาสอีซี่เท่านั้น
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_pml}    ${retrieval_ref_number}      ${lookup_amount2}    ${storedid_lookup_pml}    ${buyer_name_lookup_success}    description=${order_id}    tid=0000000000002302
    [Teardown]    Delete Data In PML Transaction    ${shopid_lookup_pml}

MATC-12181
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have FirstNameThai=${space}FirstNameThai${space} and LastNameThai=${space}LastNameThai${space} 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_01}    ${last_name_01}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${first_name_01}${SPACE}${last_name_01}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12182
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have FirstNameThai = ${space} 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${SPACE}    ${last_name_thai}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${SPACE}${SPACE}${last_name_thai}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12183
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have LastNameThai = ${space} 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${SPACE}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${first_name_thai}${SPACE}${SPACE}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12184
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have FirstNameThai = ${space} and LastNameThai = ${space} 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${SPACE}    ${SPACE}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${SPACE}${SPACE}${SPACE}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12185
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have ${space} between FirstNameThai 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_02}    ${last_name_thai}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${first_name_02}${SPACE}${last_name_thai}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12186
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have ${space} between LastNameThai 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_02}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${first_name_thai}${SPACE}${last_name_02}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12187
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have FirstNameThai = ${EMPTY} and LastNameThai = ${EMPTY} 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${EMPTY}    ${EMPTY}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${SPACE}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-12188
    [Documentation]    To verify that the lookup transaction api return successful HTTP200 [Success] in case owner 
    ...    profile have FirstNameThai = 200 char and LastNameThai = 200 char 
    [Tags]    QR & Payment    Api Lookup Transaction    Medium    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_200}    ${last_name_200}
    ${lookup_amount}    Set Variable    1000.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    #####################################################################
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response}     0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    account_name=${first_name_200}${SPACE}${last_name_200}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response}    ${wallet_id_lookup_success}    ${retrieval_ref_number}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}
    [Teardown]    Update FirstNameThai LastNameThai By UserID    ${userid_wallet_lookup_success}    ${first_name_thai}    ${last_name_thai}

MATC-13322
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 200 OK (Success 1000) when amount is 
    ...    equal to amount in request of calling API POST external/merchant/qr/create and paymentType = T30 
    [Tags]    QR & Payment    Api Lookup Transaction    High
    ${response_tag30_wallet_status}     Query Data In StoredValueAccount By Shop    ${lookup_create_qr_request.MATC_13322.shopId}
    Run Keyword If    '${response_tag30_wallet_status[0]['WalletStatus']}' != 'WS01'       Update Wallet Status By ShopId           ${lookup_create_qr_request.MATC_13322.shopId}     WS01
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th      ROBOT_MATC_13322       SHIP      wallet_id=${lookup_create_qr_request.MATC_13322.walletId}       payment_type=${create_qr_payment_type_t30}       amount=${lookup_create_qr_request.MATC_13322.amount}
    Assert Http Status Code Is 200 Ok      ${http_status_code}
    Assert Response Status In Success [1000]     ${response}
    Assert OrderId Should Not Be Empty     ${response}
    Assert Common Detail Generate Qr        ${response}     ${qr_result_T30_valid_parameters_success}
    Assert Qr Tag30 Success   ${response}     ${qr_result_T30_valid_parameters_success}
    Assert Qrcs Is Null   ${response}
    Assert Alipay Is Null   ${response}
    Assert Wechat Is Null   ${response}
    Assert data in Qr Transaction   ${response['data']['orderId']}       ${qrTransaction_T30_valid_parameters_success}
    Assert data in Partner Order   ${response['data']['orderId']}       ${partnerOrder_T30_valid_parameters_success}
    Assert data in PartnerMetadata   ${response['data']['orderId']}       ${walletId_T30_valid_parameters_success}       ${partnerOrder_T30_valid_parameters_success}      ${mapping_qr_partner_shipnity_meta_data}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${lookup_amount2}    Set Variable    1000.00
    ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['tag30']['ref2']}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response_lookup}     0000    No error    ${shop_name_t30}    ${retrieval_ref_number}      ${walletId_T30_valid_parameters_success}    description=${response['data']['tag30']['ref2']}    account_name=${account_name_t30}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_lookup}    ${walletId_T30_valid_parameters_success}    ${retrieval_ref_number}      ${lookup_amount2}    ${store_id}    ${buyer_name_lookup_success}    description=${response['data']['tag30']['ref2']}
    [Teardown]     Run Keywords    Delete Qr Transaction By order id    ${response['data']['orderId']}
                   ...      AND    Delete Partner Order By order id    ${response['data']['orderId']}
                   ...      AND    Update Wallet Status By ShopId    ${shopId_T30_valid_parameters_success}    ${response_tag30_wallet_status[0]['WalletStatus']}

MATC-13323
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 400 Bad Request when amount is greater 
    ...    than amount in request of calling API POST external/merchant/qr/create and paymentType = T30 
    [Tags]    QR & Payment    Api Lookup Transaction    High
   ${response_tag30_wallet_status}     Query Data In StoredValueAccount By Shop    ${lookup_create_qr_request.MATC_13322.shopId}
   Run Keyword If    '${response_tag30_wallet_status[0]['WalletStatus']}' != 'WS01'       Update Wallet Status By ShopId           ${lookup_create_qr_request.MATC_13322.shopId}     WS01
   ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th      ROBOT_MATC_13322       SHIP      wallet_id=${lookup_create_qr_request.MATC_13322.walletId}       payment_type=${create_qr_payment_type_t30}       amount=${lookup_create_qr_request.MATC_13322.amount}
   Assert Http Status Code Is 200 Ok      ${http_status_code}
   Assert Response Status In Success [1000]     ${response}
   Assert OrderId Should Not Be Empty     ${response}
   Assert Common Detail Generate Qr        ${response}     ${qr_result_T30_valid_parameters_success}
   Assert Qr Tag30 Success   ${response}     ${qr_result_T30_valid_parameters_success}
   Assert Qrcs Is Null   ${response}
   Assert Alipay Is Null   ${response}
   Assert Wechat Is Null   ${response}
   Assert data in Qr Transaction   ${response['data']['orderId']}       ${qrTransaction_T30_valid_parameters_success}
   Assert data in Partner Order   ${response['data']['orderId']}       ${partnerOrder_T30_valid_parameters_success}
   Assert data in PartnerMetadata   ${response['data']['orderId']}       ${walletId_T30_valid_parameters_success}       ${partnerOrder_T30_valid_parameters_success}      ${mapping_qr_partner_shipnity_meta_data}
   ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
   ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
   ${lookup_amount2}    Set Variable    5000.00
   ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['tag30']['ref2']}
   Assert Http Status Code Is 400 Bad Request    ${http_status_code}
   Assert Response Body With Error Object In Case Invalid Reference Data    ${response_lookup}
   Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
   Should Be Equal As Strings    ${response_lookup['funcNm']}    BillLookupResponse
   Should Be Equal As Strings    ${response_lookup['rqUID']}    SCB_20080215_QASCB001
   Should Not Be Empty    ${response_lookup['rsDt']}
   Should Be Equal As Strings    ${response_lookup['rsAppId']}    AP1940
   Should Be Equal As Strings    ${response_lookup['responseCode']}    0034
   Should Be Equal As Strings    ${response_lookup['toProxyType']}    BILLERID
   Should Be Equal As Strings    ${response_lookup['toProxyValue']}    ashd
   Should Be Equal As Strings    ${response_lookup['toBillerAccountName']}    Unknown
   Should Be Equal As Strings    ${response_lookup['toBillerServiceName']}    Unknown
   Should Be Equal As Strings    ${response_lookup['transfereeFee']}    0.00
   Should Be Equal As Strings    ${response_lookup['terminalNo']}    99999
   Should Be Equal As Strings    ${response_lookup['retrievalReferenceNumber']}    ${retrieval_ref_number}
   Should Be Equal As Strings    ${response_lookup['typeofReceiver']}    ${SPACE}
   Should Be Equal As Strings    ${response_lookup['billReference1']}    ${walletId_T30_valid_parameters_success}
   Should Be Equal As Strings    ${response_lookup['billReference2']}    ${response['data']['tag30']['ref2']}
   Should Be Equal As Strings    ${response_lookup['billReference3']}    0000000000000001
   Should Be Equal As Strings    ${response_lookup['accountName']}       ${account_name_t30}
   [Teardown]     Run Keywords    Delete Qr Transaction By order id    ${response['data']['orderId']}
                  ...      AND    Delete Partner Order By order id    ${response['data']['orderId']}
                  ...      AND    Update Wallet Status By ShopId    ${shopId_T30_valid_parameters_success}    ${response_tag30_wallet_status[0]['WalletStatus']}

MATC-13324
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 400 Bad Request when amount is less 
    ...    than amount in request of calling API POST external/merchant/qr/create and paymentType = T30 
    [Tags]    QR & Payment    Api Lookup Transaction    High
    ${response_tag30_wallet_status}     Query Data In StoredValueAccount By Shop    ${lookup_create_qr_request.MATC_13322.shopId}
    Run Keyword If    '${response_tag30_wallet_status[0]['WalletStatus']}' != 'WS01'       Update Wallet Status By ShopId           ${lookup_create_qr_request.MATC_13322.shopId}     WS01
    ${http_status_code}    ${response}    Post Request API Create Qr With Valid Request Body    application/json    th      ROBOT_MATC_13322       SHIP      wallet_id=${lookup_create_qr_request.MATC_13322.walletId}       payment_type=${create_qr_payment_type_t30}       amount=${lookup_create_qr_request.MATC_13322.amount}
    Assert Http Status Code Is 200 Ok      ${http_status_code}
    Assert Response Status In Success [1000]     ${response}
    Assert OrderId Should Not Be Empty     ${response}
    Assert Common Detail Generate Qr        ${response}     ${qr_result_T30_valid_parameters_success}
    Assert Qr Tag30 Success   ${response}     ${qr_result_T30_valid_parameters_success}
    Assert Qrcs Is Null   ${response}
    Assert Alipay Is Null   ${response}
    Assert Wechat Is Null   ${response}
    Assert data in Qr Transaction   ${response['data']['orderId']}       ${qrTransaction_T30_valid_parameters_success}
    Assert data in Partner Order   ${response['data']['orderId']}       ${partnerOrder_T30_valid_parameters_success}
    Assert data in PartnerMetadata   ${response['data']['orderId']}       ${walletId_T30_valid_parameters_success}       ${partnerOrder_T30_valid_parameters_success}      ${mapping_qr_partner_shipnity_meta_data}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${lookup_amount2}    Set Variable    100.00
    ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['tag30']['ref2']}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_lookup}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response_lookup['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response_lookup['rsDt']}
    Should Be Equal As Strings    ${response_lookup['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response_lookup['responseCode']}    0034
    Should Be Equal As Strings    ${response_lookup['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response_lookup['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response_lookup['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response_lookup['terminalNo']}    99999
    Should Be Equal As Strings    ${response_lookup['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response_lookup['billReference1']}    ${walletId_T30_valid_parameters_success}
    Should Be Equal As Strings    ${response_lookup['billReference2']}    ${response['data']['tag30']['ref2']}
    Should Be Equal As Strings    ${response_lookup['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response_lookup['accountName']}       ${account_name_t30}
    [Teardown]     Run Keywords    Delete Qr Transaction By order id    ${response['data']['orderId']}
                ...      AND    Delete Partner Order By order id    ${response['data']['orderId']}
                ...      AND    Update Wallet Status By ShopId    ${shopId_T30_valid_parameters_success}    ${response_tag30_wallet_status[0]['WalletStatus']}

MATC-13325
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 200 OK (Success 1000) when amount is 
    ...    equal to amount in request of calling API POST external/merchant/pml/create 
    [Tags]    QR & Payment    Api Lookup Transaction    High
    ${custome_field_dict}    Create Dictionary    customField1=030000    customField2=Lays 35    customField3=Snack    customField4=1    customField5=20.50
    ...    customField6=Thai Post    customField7=Lays 35    customField8=Snack    customField9=12    customField10=30.50
    ${custome_field_json}    Json.Dumps    ${custome_field_dict}
    @{product}    Create List    ${custome_field_dict}
    ${product_dict}    Create Dictionary    product=@{product}
    ${headers}    Create Header For Create PML
    @{payment_type}   Create List    PML_T30
    ${request_body}    Create Body For Create PML   walletId=${active_all_pml_wallect_id}    paymentType=@{payment_type}   partnerMetaData=${product_dict}
    ${http_status_code}    ${response}    Post Create PML    ${headers}    ${request_body}
    Assert Response Create PML Sucessfully    ${http_status_code}    ${response}    ${request_body}
    Assert PML Partner Databases And PML Transaction In Case Create PML Successfully    ${response}
    Assert Partner Meta Data One Product    ${active_all_pml_wallect_id}    ${response['data']['paymentOrderId']}    ${mapping_ship_meta_data}    ${mapping_ship_meta_data.metaData}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${lookup_amount2}    Set Variable    100.05
    ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['paymentOrderId']}
    Assert Http Status Code Is 200 Ok    ${http_status_code}
    Assert Response Body With Data Object    ${response_lookup}     0000    No error    SCB มณี SHOP (ห้ามใช้ร้านเกดนะ(ชั่วคราว))    ${retrieval_ref_number}      ${walletId_T30_valid_parameters_success}    description=${response['data']['paymentOrderId']}    account_name=เทส: เทส: นายเทส เทส
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_lookup}    ${walletId_T30_valid_parameters_success}    ${retrieval_ref_number}      ${lookup_amount2}    2264    ${buyer_name_lookup_success}    description=${response['data']['paymentOrderId']}
    [Teardown]     Delete Data PartnerMetadata   ${response['data']['paymentOrderId']}

MATC-13326
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 400 Bad Request when amount is greater 
    ...    than amount in request of calling API POST external/merchant/pml/create 
    [Tags]    QR & Payment    Api Lookup Transaction    High
    ${custome_field_dict}    Create Dictionary    customField1=030000    customField2=Lays 35    customField3=Snack    customField4=1    customField5=20.50
    ...    customField6=Thai Post    customField7=Lays 35    customField8=Snack    customField9=12    customField10=30.50
    ${custome_field_json}    Json.Dumps    ${custome_field_dict}
    @{product}    Create List    ${custome_field_dict}
    ${product_dict}    Create Dictionary    product=@{product}
    ${headers}    Create Header For Create PML
    @{payment_type}   Create List    PML_T30
    ${request_body}    Create Body For Create PML   walletId=${active_all_pml_wallect_id}    paymentType=@{payment_type}   partnerMetaData=${product_dict}
    ${http_status_code}    ${response}    Post Create PML    ${headers}    ${request_body}
    Assert Response Create PML Sucessfully    ${http_status_code}    ${response}    ${request_body}
    Assert PML Partner Databases And PML Transaction In Case Create PML Successfully    ${response}
    Assert Partner Meta Data One Product    ${active_all_pml_wallect_id}    ${response['data']['paymentOrderId']}    ${mapping_ship_meta_data}    ${mapping_ship_meta_data.metaData}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${lookup_amount2}    Set Variable    500.05
    ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['paymentOrderId']}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_lookup}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response_lookup['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response_lookup['rsDt']}
    Should Be Equal As Strings    ${response_lookup['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response_lookup['responseCode']}    0034
    Should Be Equal As Strings    ${response_lookup['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response_lookup['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response_lookup['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response_lookup['terminalNo']}    99999
    Should Be Equal As Strings    ${response_lookup['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response_lookup['billReference1']}    ${walletId_T30_valid_parameters_success}
    Should Be Equal As Strings    ${response_lookup['billReference2']}    ${response['data']['paymentOrderId']}
    Should Be Equal As Strings    ${response_lookup['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response_lookup['accountName']}       เทส: เทส: นายเทส เทส
    [Teardown]     Delete Data PartnerMetadata   ${response['data']['paymentOrderId']}

MATC-13327
    [Documentation]    to verify that API POST /transactions/lookup return HTTP 400 Bad Request when amount is less 
    ...    than amount in request of calling API POST external/merchant/pml/create 
    [Tags]    QR & Payment    Api Lookup Transaction    High
    ${custome_field_dict}    Create Dictionary    customField1=030000    customField2=Lays 35    customField3=Snack    customField4=1    customField5=20.50
    ...    customField6=Thai Post    customField7=Lays 35    customField8=Snack    customField9=12    customField10=30.50
    ${custome_field_json}    Json.Dumps    ${custome_field_dict}
    @{product}    Create List    ${custome_field_dict}
    ${product_dict}    Create Dictionary    product=@{product}
    ${headers}    Create Header For Create PML
    @{payment_type}   Create List    PML_T30
    ${request_body}    Create Body For Create PML   walletId=${active_all_pml_wallect_id}    paymentType=@{payment_type}   partnerMetaData=${product_dict}
    ${http_status_code}    ${response}    Post Create PML    ${headers}    ${request_body}
    Assert Response Create PML Sucessfully    ${http_status_code}    ${response}    ${request_body}
    Assert PML Partner Databases And PML Transaction In Case Create PML Successfully    ${response}
    Assert Partner Meta Data One Product    ${active_all_pml_wallect_id}    ${response['data']['paymentOrderId']}    ${mapping_ship_meta_data}    ${mapping_ship_meta_data.metaData}
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqDt}     Change Time Format for Approved API    ${current_datetimewithT}
    ${lookup_amount2}    Set Variable    90.05
    ${http_status_code}    ${response_lookup}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${walletId_T30_valid_parameters_success}    ${rqDt}    ${lookup_amount2}    billReference2=${response['data']['paymentOrderId']}
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_lookup}
    Assert No Insert Data On Transaction Table    ${wallet_id_lookup_success}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['funcNm']}    BillLookupResponse
    Should Be Equal As Strings    ${response_lookup['rqUID']}    SCB_20080215_QASCB001
    Should Not Be Empty    ${response_lookup['rsDt']}
    Should Be Equal As Strings    ${response_lookup['rsAppId']}    AP1940
    Should Be Equal As Strings    ${response_lookup['responseCode']}    0034
    Should Be Equal As Strings    ${response_lookup['toProxyType']}    BILLERID
    Should Be Equal As Strings    ${response_lookup['toProxyValue']}    ashd
    Should Be Equal As Strings    ${response_lookup['toBillerAccountName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['toBillerServiceName']}    Unknown
    Should Be Equal As Strings    ${response_lookup['transfereeFee']}    0.00
    Should Be Equal As Strings    ${response_lookup['terminalNo']}    99999
    Should Be Equal As Strings    ${response_lookup['retrievalReferenceNumber']}    ${retrieval_ref_number}
    Should Be Equal As Strings    ${response_lookup['typeofReceiver']}    ${SPACE}
    Should Be Equal As Strings    ${response_lookup['billReference1']}    ${walletId_T30_valid_parameters_success}
    Should Be Equal As Strings    ${response_lookup['billReference2']}    ${response['data']['paymentOrderId']}
    Should Be Equal As Strings    ${response_lookup['billReference3']}    0000000000000001
    Should Be Equal As Strings    ${response_lookup['accountName']}       เทส: เทส: นายเทส เทส
    [Teardown]     Delete Data PartnerMetadata   ${response['data']['paymentOrderId']}

NEW-1
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber and fromSenderBank, and terminalNo are not duplicatelicate, and typeofSender 
    ...    is non-cross border with different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-2
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber and fromSenderBank are not duplicatelicated and terminalNo is default, and 
    ...    typeofSender is non-cross border with same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-3
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber, and terminalNo are not duplicatelicate, fromSenderBank is duplicate, and 
    ...    typeofSender is non-cross border with different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-4
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber is duplicate, and fromSenderBank, and terminalNo are not duplicatelicate, and 
    ...    typeofSender is non-cross border with same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-5
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber is not duplicatelicate and fromSenderBank is duplicated and terminalNo is 
    ...    default, and typeofSender is non-cross border with different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-6
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber is duplicate and fromSenderBank is not duplicatelicated and terminalNo is 
    ...    default, and typeofSender is non-cross border with same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-7
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request 
    ...    lookup with retrievalReferenceNumber, and fromSenderBank are duplicate, terminalNo is not duplicatelicate, and 
    ...    typeofSender is non-cross border with different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-8
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is non-cross border 
    ...    with same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-9
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is non-cross border 
    ...    with different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-10
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with 
    ...    same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-11
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with 
    ...    different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-12
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with 
    ...    same walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

NEW-13
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request 
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with 
    ...    different walletID 
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30    NotReady
    Log To Console    EMPTY TEST CASE SCRIPT

MATC-14975
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber and fromSenderBank, and terminalNo are not duplicate, and typeofSender
    ...    is non-cross border with different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=12345    fromSenderBank=004
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=004

MATC-14976
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber and fromSenderBank are not duplicated and terminalNo is default, and
    ...    typeofSender is non-cross border with same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=004
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=004

MATC-14977
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber, and terminalNo are not duplicate, fromSenderBank is duplicate, and
    ...    typeofSender is non-cross border with different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=12345    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=014

MATC-14978
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber is duplicate, and fromSenderBank, and terminalNo are not duplicate, and
    ...    typeofSender is non-cross border with same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=12345    fromSenderBank=004
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=004

MATC-14979
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber, and fromSenderBank are duplicate, terminalNo is not duplicate, and
    ...    typeofSender is non-cross border with different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=12345    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=014

MATC-14980
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is non-cross border
    ...    with same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=12345    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=12345    fromSenderBank=014
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345

MATC-14981
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is non-cross border
    ...    with different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}

MATC-14982
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with
    ...    same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=99999    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}

MATC-14983
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with
    ...    different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=12345    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test    exp_terminal_no=12345
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=12345    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345

MATC-14984
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with
    ...    same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=12345    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}    exp_terminal_no=12345
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=12345    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}    exp_terminal_no=12345


MATC-14985
    [Documentation]    Verify that the lookup transaction api return unsuccessful HTTP400 [Bad Request] in case request
    ...    with retrievalReferenceNumber, fromSenderBank, terminalNo are duplicated,and typeofSender is cross border with
    ...    different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=99999    fromSenderBank=014    typeofSender=U
    Assert Http Status Code Is 400 Bad Request    ${http_status_code}
    Assert Response Body With Error Object In Case Invalid Reference Data    ${response_2}
    Assert Response Body With Data Object    ${response_2}    0034    Invalid reference data    Unknown    ${retrieval_ref_number1}    ${wallet_id_lookup_success}


MATC-14986
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber is not duplicate and fromSenderBank is duplicated and terminalNo is
    ...    default, and typeofSender is non-cross border with different walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Run Keywords    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ...    AND    Delete Transaction by WalletID    ${wallet_id_lookup_not_dup}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_not_dup}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_id_lookup_not_dup})    ${retrieval_ref_number}    ${wallet_id_lookup_not_dup}    account_name=NFT Test
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=014

MATC-14987
    [Documentation]    Verify that the lookup transaction api return successful HTTP200 [Success] in case request
    ...    lookup with retrievalReferenceNumber is duplicate and fromSenderBank is not duplicated and terminalNo is
    ...    default, and typeofSender is non-cross border with same walletID
    [Tags]    QR & Payment    Api Lookup Transaction    High    ApiLookup    CheckTag30DailyLimit    PaymentTag30
    [Setup]    Delete Transaction by WalletID    ${wallet_id_lookup_success}
    ${lookup_amount}    Set Variable    10.00
    ${current_date}    ${current_datetime}     ${current_datetimewithT}      date_time.Current Date
    ${rqdt}    Change Time Format for Approved API    ${current_datetimewithT}
    ${http_status_code}    ${response}    ${retrieval_ref_number}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=NULL    terminalNo=99999    fromSenderBank=014
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response}    0000    No error    SCB มณี SHOP (${shopth_wallet_lookup_success})    ${retrieval_ref_number}    ${wallet_id_lookup_success}
    ###############################################################################
    ${http_status_code}    ${response_2}    ${retrieval_ref_number1}    Send Request Lookup Transaction    ${wallet_id_lookup_success}    ${rqDt}    ${lookup_amount}    retrievalReferenceNumber=${retrieval_ref_number}    terminalNo=99999    fromSenderBank=004
    Assert Http Status Code Is 200 Ok   ${http_status_code}
    Assert Response Body With Data Object    ${response_2}    0000    No error    SCB MANEE SHOP (${wallet_id_lookup_success})    ${retrieval_ref_number1}    ${wallet_id_lookup_success}
    Assert Lookup Transaction On Transaction Table In Case Lookup Success    ${response_2}    ${wallet_id_lookup_success}    ${retrieval_ref_number1}      ${lookup_amount}    ${storedid_lookup_success}    ${buyer_name_lookup_success}    exp_buyer_bank=004
